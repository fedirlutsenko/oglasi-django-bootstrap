{% extends 'base.html' %}
{% load static %}

{% block page_specific_styles %}
  <link rel="stylesheet" href="{% static 'css/homepage.css' %}">
{% endblock %}

{% block content %}
  <header class="p-3 border-bottom header header-homepage">
    <div class="container-fluid text-center text-light">
      {% include 'includes/menu.html' %}
    </div>
  </header>
  <section class="home-search">
    <div class="container-fluid">
      <div class="home-content">
        <div class="text-center home-text">
          <h1>Pronadjite dom vaših snova</h1>
        </div>
        <div class="home-search-form p-3">
          <form action="/oglasi" id="search-listing-form">
            <div class="row justify-content-sm-center">
              <div class="col col-md-auto">
                <div class="input-group mb-3">
                  <button for="izdavanje" id="btnBuy" name="0" class="btn btn-blue" type="button">Prodaja</button>
                  <button for="prodaja" id="btnRent" name="1" class="btn btn-transparent rounded-end" type="button">Izdavanje</button>
                  <input type="hidden" name="search_type" value="0" id="search_type">
                </div>
              </div>
            </div>
            <div class="mx-auto search-form-row">
              <div class="row">
                <div class="col mx-auto">
                  <div class="input-group mb-3">
                    <input type="text" class="form-control input-location" name="grad" id="location" aria-label="Lokacija" placeholder="Lokacija">
                    <select for="type" class="form-select select-listing-type" name="tip" id="type">
                      <option selected value="">Tip...</option>
                      {% for categ in categories %}
                        {% if categ.name != 'Stambene nekretnine' and categ.name != 'Zemljišta' and categ.name != 'Poslovni prostori' %}
                          <option value="{{ categ.name }}">{{ categ.name }}</option>
                        {% endif %}
                      {% endfor %}
                    </select>
                    <input for="neighbourhood" type="text" class="form-control input-area" name="lokacija" id="neighbourhood" aria-label="Kraj" placeholder="Kraj">
                    <button class="btn btn-outline btn-white btn-details" type="button" id="btnFormDetails">Detaljnije
                    </button>
                    <button class="btn btn-blue btn-search" type="submit"  id="inputGroupFileAddon04">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                           class="bi bi-search" viewBox="0 0 16 16">
                        <path
                            d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"></path>
                      </svg>
                      Pretrazi
                    </button>
                  </div>
                </div>
                </div>
            </div>
            <div id="detailsForm" class="mx-auto detail-form hide">
              <div class="row mb-3">
                <div class="col-3">
                  <label for="price" class="form-label">Cena</label>
                  <select class="form-select" id="price-min" name="cena" placeholder="od" aria-label="Default select example">
                    <option value="">Cena</option>
                    <option  {% if request.GET.cena == '_20000' %} selected {% endif %} value="_20000">do 20.000 e</option>
                    <option  {% if request.GET.cena == '20000_40.000' %} selected {% endif %} value="20000_40000">20.000 - 40.000 e</option>
                    <option  {% if request.GET.cena == '40000_60000' %} selected {% endif %} value="40000_60000">40.000 - 60.000 e</option>
                    <option  {% if request.GET.cena == '60000_80000' %} selected {% endif %} value="60000_80000">60.000 - 80.000 e</option>
                    <option  {% if request.GET.cena == '80000_100000' %} selected {% endif %} value="80000_100000">80.000 - 100.000 e</option>
                    <option  {% if request.GET.cena == '100000_150000' %} selected {% endif %} value="100000_150000">100.000 - 150.000 e</option>
                    <option  {% if request.GET.cena == '150000_200000' %} selected {% endif %} value="150000_200000">150.000 - 200.000 e</option>
                    <option  {% if request.GET.cena == '200000_300000' %} selected {% endif %} value="200000_300000">200.000 - 300.000 e</option>
                    <option  {% if request.GET.cena == '300000_500000' %} selected {% endif %} value="300000_500000">300.000 - 500.000 e</option>
                    <option  {% if request.GET.cena == '500000_' %} selected {% endif %} value="500000_">500.000 i više</option>
                  </select>
                </div>
                <div class="col-3">
                  <label for="size" class="form-label">Površina</label>
                  <select class="form-select" id="size-from" name="povrsina" placeholder="od" aria-label="Default select example">
                    <option value="">Površina</option>
                    <option  {% if request.GET.povrsina == '_35' %} selected {% endif %} value="_35">do 35 km2</option>
                    <option  {% if request.GET.povrsina == '35_45' %} selected {% endif %} value="35_45">35 - 45 km2</option>
                    <option  {% if request.GET.povrsina == '45_55' %} selected {% endif %} value="45_55">45 - 55 km2</option>
                    <option  {% if request.GET.povrsina == '55_75' %} selected {% endif %} value="55_75">55 - 75 km2</option>
                    <option  {% if request.GET.povrsina == '75_100' %} selected {% endif %} value="75_100">75 - 100 km2</option>
                    <option  {% if request.GET.povrsina == '100_150' %} selected {% endif %} value="100_150">100 - 150 km2</option>
                    <option  {% if request.GET.povrsina == '150_200' %} selected {% endif %} value="150_200">150 - 200 km2</option>
                    <option  {% if request.GET.povrsina == '200_300' %} selected {% endif %} value="200_300">200 - 300 km2</option>
                    <option  {% if request.GET.povrsina == '300_' %} selected {% endif %} value="300_">300 i više</option>
                  </select>
                </div>
                <div class="col-3">
                  <label class="form-label">Struktura</label>
                    <select class="form-select" id="structure" name="struktura" aria-label="Default select example">
                      <option value="">Struktura</option>
                      <option  {% if request.GET.struktura == '1' %} selected {% endif %} value="1">1 Prostorija</option>
                      <option  {% if request.GET.struktura == '1.5' %} selected {% endif %} value="1.5">1.5 Prostorija</option>
                      <option  {% if request.GET.struktura == '2' %} selected {% endif %} value="2">2 Prostorija</option>
                      <option  {% if request.GET.struktura == '2.5' %} selected {% endif %} value="2.5">2.5 Prostorija</option>   
                      <option  {% if request.GET.struktura == '3' %} selected {% endif %} value="3">3 Prostorija</option>
                      <option  {% if request.GET.struktura == '3.5' %} selected {% endif %} value="3.5">3.5 Prostorija</option>
                      <option  {% if request.GET.struktura == '4' %} selected {% endif %} value="4">4 i više</option>
                    </select>
                  </select>
                </div>
                <div class="col-3">
                  <label class="form-label">Stanje</label>
                  <select class="form-select" id="condition" name="condition" >
                    <option value="">Izaberite...</option>
                    <option {% if request.GET.condition == 'novogradnja' %} selected {% endif %} value="novogradnja">Novogradnja</option>
                    <option {% if request.GET.condition == 'renovirano' %} selected {% endif %} value="renovirano">Renovirano</option>
                    <option {% if request.GET.condition == 'izvorno' %} selected {% endif %} value="izvorno">Izvorno</option>
                  </select>
                </div>
                <div class="col-3">
                  <label class="form-label">Spratnost</label>
                  <select class="form-select" id="structure" name="spratnost" aria-label="Default select example">
                    <option value="">Spratnost</option>
                    <option  {% if request.GET.total_floors == '0' %} selected {% endif %} value="0">Prizemlje</option>
                    <option  {% if request.GET.total_floors == '1' %} selected {% endif %} value="1">1 Sprat</option>
                    <option  {% if request.GET.total_floors == '2' %} selected {% endif %} value="2">2 Sprata</option>
                    <option  {% if request.GET.total_floors == '3' %} selected {% endif %} value="3">3 Sprata</option>   
                    <option  {% if request.GET.total_floors == '4' %} selected {% endif %} value="4">4 Sprata</option>
                    <option  {% if request.GET.total_floors == '5' %} selected {% endif %} value="5">5 I više</option>
                  </select>
                </div>
                <div class="col-3">
                  <label class="form-label">Garažni prostor</label>
                  <select class="form-select" id="garage" name="parking">
                    <option value="">Izaberite...</option>
                    <option {% if request.GET.parking == 'garaža' %} selected {% endif %} value="garaža">Garaža</option>
                    <option {% if request.GET.parking == 'parking mesto' %} selected {% endif %} value="parking mesto">Parking mesto</option>
                    <option {% if request.GET.parking == 'parking klackalica' %} selected {% endif %} value="parking klackalica">Parking klackalica</option>
                    <option {% if request.GET.parking == 'parking van zone' %} selected {% endif %} value="parking van zone">Parking van zone</option>
                    <option {% if request.GET.parking == 'parking u zoni' %} selected {% endif %} value="parking u zoni">Parking u zoni</option>
                    <option {% if request.GET.parking == 'garažno mesto' %} selected {% endif %} value="garažno mesto">Garažno mesto</option>
                    <option {% if request.GET.parking == 'parking platforma' %} selected {% endif %} value="parking platforma">Parking platforma</option>
                  </select>
                </div>
                <div class="col-3">
                  <label for="heating"  class="form-label">Grejanje</label>
                  <select class="form-select" id="heating" name="grejanje">
                    <option value="">Izaberite...</option>
                    <option value="Grejanje na struju">Grejanje na struju</option>
                    <option value="Centralno grejanje">Centralno grejanje</option>
                    <option value="Grejanje na gas">Grejanje na gas</option>
                    <option value="Čvrsta goriva">Čvrsta goriva</option>
                    <option value="Grejanje ostalo">Grejanje ostalo</option>
                  </select>
                </div>
                <div class="col-3 mt-2 text-center">
                  <h5>Broj oglasa:</h5>
                  <h5>{{total_listings}}</h5>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>
  <section class="featured-properties p-4 px-5">
    <div class="container-fluid padding-large">
      <h2 class="text-center mb-4">Preporučeni oglasi</h2>
      <div id="carouselExampleIndicators" class="carousel carousel-dark slide" data-bs-ride="true">
        <div class="carousel-indicators">
          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"
                  aria-current="true" aria-label="Slide 1"></button>
          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                  aria-label="Slide 2"></button>
          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
                  aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner pb-5" >
          <div class=" carousel-item active">
            <div class="row">
              {% for listing in listings1 %}
              <div class="col-xxl-3 col-xl-3 col-md-6 col-sm-12 mb-4">
                {% include 'includes/listings/listing_card.html' with listing=listing %}
              </div>
              {% endfor %}
            </div>
          </div>
          <div class="carousel-item">
            <div class="row">
              {% for listing in listings2 %}
              <div class="col-xxl-3 col-xl-3 col-md-6 col-sm-12  mb-4">
                {% include 'includes/listings/listing_card.html' with listing=listing %}
              </div>
              {% endfor %}
            </div>
          </div>
          <div class="carousel-item">
            <div class="row">
              {% for listing in listings3 %}
              <div class="col-xxl-3 col-xl-3 col-md-6 col-sm-12  mb-4">
                {% include 'includes/listings/listing_card.html' with listing=listing %}
              </div>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
      {% include 'includes/property_cities.html' %}
    </div>
  </section>


  <div class="break-bg mb-3"></div>

  <section class="p-3">
    <div class="container-fluid">
      <div class="row">
        <div id="carouselAgencies" class="carousel carousel-dark slide pb-4" data-bs-ride="true">
          <div class="carousel-indicators mb-0">
            <button type="button" data-bs-target="#carouselAgencies" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#carouselAgencies" data-bs-slide-to="1" aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#carouselAgencies" data-bs-slide-to="2" aria-label="Slide 3"></button>
          </div>
          <div class="carousel-inner">
            <div class="carousel-item active">
              <div class="row">
                <div class="col">
                  <div class="card shadow-sm">
                    <img src="{% static 'images/property/fp1.jpg' %}" class="d-block w-100" alt="...">
                  </div>
                </div>
                <div class="col">
                  <div class="card shadow-sm">
                    <img src="{% static 'images/property/fp1.jpg' %}" class="d-block w-100" alt="...">
                  </div>
                </div>
                <div class="col">
                  <div class="card shadow-sm">
                    <img src="{% static 'images/property/fp1.jpg' %}" class="d-block w-100" alt="...">
                  </div>
                </div>
                <div class="col">
                  <div class="card shadow-sm">
                    <img src="{% static 'images/property/fp1.jpg' %}" class="d-block w-100" alt="...">
                  </div>
                </div>
                <div class="col">
                  <div class="card shadow-sm">
                    <img src="{% static 'images/property/fp1.jpg' %}" class="d-block w-100" alt="...">
                  </div>
                </div>
                <div class="col">
                  <div class="card shadow-sm">
                    <img src="{% static 'images/property/fp1.jpg' %}" class="d-block w-100" alt="...">
                  </div>
                </div>
              </div>
            </div>
            <div class="carousel-item">
                            ovde idu jos slajdova za agencije kada ih bude
            </div>
            <div class="carousel-item">
                            ovde idu jos slajdova za agencije kada ih bude
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="blog-news p-3">
    <h2 class="text-center mb-4">Blog i Vesti</h2>
    <div class="container-fluid">
      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3 mb-3">
        <div class="col-lg-6">
          <div class="card shadow">
            <img src="{% static 'images/placeholders/blog_cover.jpg' %}" height="212" alt="Blog cover" />

            <div class="card-body">
              <h5>Kako do stambenog kredita?</h5>
              <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
              <div class="d-flex justify-content-between align-items-center">
                <p class="blog-user">Admin</p>
                <small class="text-muted">30.10.2022.</small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-3">
          <div class="card shadow">
            <img src="{% static 'images/property/pc3.jpg' %}" height="212" alt="Blog cover" />

            <div class="card-body">
              <h5>Kako do stambenog kredita?</h5>
              <p class="card-text clip-text">This is a wider card with supporting text below as a natural lead-inThis content is a little bit longer. </p>
              <div class="d-flex justify-content-between align-items-center">
                <p class="blog-user">Admin</p>
                <small class="text-muted">30.10.2022.</small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-3">
          <div class="card shadow">
            <img src="{% static 'images/property/pc3.jpg' %}" height="212" alt="Blog cover" />

            <div class="card-body">
              <h5>Kako do stambenog kredita?</h5>
              <p class="card-text clip-text">This is a wider card with supporting text below as a natural lead-inThis content is a little bit longer. </p>
              <div class="d-flex justify-content-between align-items-center">
                <p class="blog-user">Admin</p>
                <small class="text-muted">30.10.2022.</small>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3 mb-3">
        <div class="col-lg-4">
          <div class="card shadow">
            <img src="{% static 'images/property/pc3.jpg' %}" height="212" alt="Blog cover" />

            <div class="card-body">
              <h5>Kako do stambenog kredita?</h5>
              <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
              <div class="d-flex justify-content-between align-items-center">
                <p class="blog-user">Admin</p>
                <small class="text-muted">30.10.2022.</small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-4">
          <div class="card shadow">
            <img src="{% static 'images/property/pc3.jpg' %}" height="212" alt="Blog cover" />

            <div class="card-body">
              <h5>Kako do stambenog kredita?</h5>
              <p class="card-text clip-text">This is a wider card with supporting text below as a natural lead-inThis content is a little bit longer. </p>
              <div class="d-flex justify-content-between align-items-center">
                <p class="blog-user">Admin</p>
                <small class="text-muted">30.10.2022.</small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-4">
          <div class="card shadow">
            <img src="{% static 'images/property/pc3.jpg' %}" height="212" alt="Blog cover" />

            <div class="card-body">
              <h5>Kako do stambenog kredita?</h5>
              <p class="card-text clip-text">This is a wider card with supporting text below as a natural lead-inThis content is a little bit longer. </p>
              <div class="d-flex justify-content-between align-items-center">
                <p class="blog-user">Admin</p>
                <small class="text-muted">30.10.2022.</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="loyalty-program p-4 text-center">
    <h3 class="mb-4">Loyalty program</h3>
    <p>S obzirom da smo novi na tržištu nekretnina kao portal, spremili smo za naše korisnike tkzv “loyalty program”. Program kao što sam naziv kaže, lojalnost za sve naše korisnike koji startuju sa nama na ovom putovanju imaće povoljnije uslove i veće mogućnosti u upravljanju i promovisanju svojih oglasa. Više na stranici cenovnik o detaljima.</p>
  </section>
{% endblock %}

{% block page_specific_scripts %}
  <script>
    const detailForm = document.getElementById('detailsForm');
    const detailBtn = document.getElementById('btnFormDetails');
    detailBtn.onclick = function(event) {
      detailForm.classList.toggle('show')
    }

    const btnBuy = document.getElementById('btnBuy');
    const btnRent = document.getElementById('btnRent');
    const searchType = document.getElementById('search_type');
    const toggleBtnClasses = function(value) {
      console.log(value)
      btnBuy.classList.toggle('btn-blue');
      btnBuy.classList.toggle('btn-transparent');
      btnRent.classList.toggle('btn-transparent');
      btnRent.classList.toggle('btn-blue');
      searchType.value = value;
    }
    btnRent.onclick = function() {
      toggleBtnClasses('1');
    }
    btnBuy.onclick = function() {
      toggleBtnClasses('0');
    }

  </script>
{% endblock %}
