{% load static %}

<div class="d-flex border-bottom  border-secondary mt-3" >
  <div class="col-4 d-flex">
    <div class="position-absolute p-1 rounded text-white {% if listing.status == '0' %} bg-danger {% elif listing.status == '1' %} bg-secondary {% endif %}">
      {% if listing.status == '0' %}
        Prodaja
      {% elif listing.status == '1' %}
        Izdavanje
      {% endif %}
    </div>
    <img class="rounded" src='{% get_media_prefix %}{{ listing.images.first.file }}' alt="Hearth" width="180px" height="102px" onclick="onListingClick('{{listing.slug}}')">
    <div class="ps-3">
      <p class="fw-bold">{{listing.title|truncatechars:25}}</p>
      <p class="d-flex">{{listing.city}}, {{listing.municipality}}</p>
      <h6 class="fw-bold">{% include 'includes/listing_helpers/price_parser.html' %}</h6>
    </div>
  </div>
  <div class="col-2 d-flex justify-content-center align-items-center fw-light" >
      {{listing.date_listed|date:"d"}}.{{listing.date_listed|date:"m"}}.{{listing.date_listed|date:"Y"}}
  </div>
  <div class="col-2 d-flex justify-content-center align-items-center">  
    <div class="rounded py-2 px-4 color-blue border border-info ">
      {{listing.status}}
    </div> 
  </div>
  <div class="col-2 d-flex justify-content-center align-items-center">
      2321
  </div>
  <div class="col-2 d-flex justify-content-evenly align-items-center">
    <img class="" onclick="editHandler()" src="{% static 'images/icons/edit.svg' %}" alt="Hearth" width="30px" height="30px">
    <img class="" onclick="deleteHandler()" src="{% static 'images/icons/bin.svg' %}" alt="Hearth" width="28px" height="28px">
  </div>
</div>
<script>
  function onListingClick(slug) {
        {% if debug != None %}
          window.location.href=`http://localhost:8000/oglasi/pregled/${slug}`
        {% else %}
          console.error('Define real URL');
        {% endif %}
    }

    function editHandler() {
      console.log('edit')
    }

    function deleteHandler() {
      console.log('delete')
    }

</script>